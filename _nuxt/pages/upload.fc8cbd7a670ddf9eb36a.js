webpackJsonp([1],{"281h":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("dkyF"),a=o("S1bN"),n=!1;var s=function(t){n||o("PIHh")},r=o("VU/8")(i.a,a.a,!1,s,"data-v-3eec518c",null);r.options.__file="pages/upload.vue",e.default=r.exports},"62cQ":function(t,e,o){"use strict";e.a={props:["image","overlay","ratio"],mounted:function(){}}},"7tXS":function(t,e,o){(t.exports=o("FZ+f")(!1)).push([t.i,"",""])},PIHh:function(t,e,o){var i=o("mjTh");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o("rjj0")("39bf1962",i,!1,{sourceMap:!1})},S1bN:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-two-thirds no-scroll"},[o("label",{attrs:{for:"file"}},[o("photo",{class:{"is-static":t.uploading},attrs:{image:t.overlay.avatar,overlay:t.overlay.urls.lg,ratio:t.overlay.bulma}})],1)]),o("div",{staticClass:"column"},[o("header",[o("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.title)+"\n      ")]),o("p",[t._v("\n        "+t._s(t.prompt)+"\n      ")])]),o("div",{staticClass:"actions has-text-centered"},[o("label",{staticClass:"button is-primary",class:{"is-loading":t.uploading},attrs:{for:"file"}},[o("span",[t._v(t._s(t.buttons.default.label)+"Â ")]),o("span",{staticClass:" icon "},[o("i",{class:["fa",t.buttons.default.icon]})])])])]),o("input",{attrs:{type:"file",accept:"image/*",name:"file",id:"file"},on:{change:function(e){return t.filesChange(e.target.files)}}})])};i._withStripped=!0;var a={render:i,staticRenderFns:[]};e.a=a},ZZhQ:function(t,e,o){var i=o("7tXS");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o("rjj0")("7f46f938",i,!1,{sourceMap:!1})},dkyF:function(t,e,o){"use strict";var i=o("Dd8w"),a=o.n(i),n=o("NYxO"),s=o("xhUj"),r=o("Mxx2");e.a={components:{Photo:s.a},data:function(){return{uploading:!1}},computed:a()({},Object(n.mapState)({image:function(t){return t.image},title:function(t){return t.content.steps.upload.title},prompt:function(t){return t.content.steps.upload.prompt},overlay:function(t){return t.selectedoverlay},buttons:function(t){return t.content.steps.upload.buttons},facebook:function(t){return t.facebook}})),methods:a()({},Object(n.mapActions)(["uploadFile","useImage"]),Object(n.mapMutations)({addError:"addError",setOrientation:"setOrientation",setSelectedStep:"setSelectedStep",facebookResponse:"facebook/response"}),{getProfilePic:function(){var t=this;this.uploading=!0,r.a.getProfilePicture(this.facebook.authResponse).then(function(e){t.useImage(e)}).catch(function(e){t.uploading=!1,console.error("Facebook profile pic",e)})},useProfilePic:function(){var t=this;this.facebook.connected?this.getProfilePic():r.a.login().then(function(e){t.facebookResponse(e.response),t.getProfilePic()}).catch(function(t){console.error("Facebook login",t)})},filesChange:function(t){this.uploading=!0,console.log(t);var e=t?t[0]:null;if(e)if(e.type.match("image.*")){var i=o("sbrb"),a=this;i.getData(e,function(){a.setOrientation(i.getTag(this,"Orientation"))}),this.uploadFile(e)}else this.addError(new Error("File is not an image"));else this.addError(new Error("No file"))}}),watch:{image:function(t,e){t&&this.$router.push("edit")}},mounted:function(){this.setSelectedStep("upload")}}},mjTh:function(t,e,o){(t.exports=o("FZ+f")(!1)).push([t.i,"input[data-v-3eec518c]{opacity:0;position:absolute;height:0;width:0}button[data-v-3eec518c]{margin-top:4px;margin-top:.25rem}",""])},ukXh:function(t,e,o){"use strict";var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:["image",this.ratio]},[e("img",{attrs:{src:this.image}}),this.overlay?e("img",{attrs:{src:this.overlay}}):this._e()])};i._withStripped=!0;var a={render:i,staticRenderFns:[]};e.a=a},xhUj:function(t,e,o){"use strict";var i=o("62cQ"),a=o("ukXh"),n=!1;var s=function(t){n||o("ZZhQ")},r=o("VU/8")(i.a,a.a,!1,s,"data-v-5a96fe32",null);r.options.__file="components/Photo.vue",e.a=r.exports}});